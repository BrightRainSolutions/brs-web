function fireup(){$(document).ready(brs.init())}dojo.require("esri.map"),dojo.require("esri.layers.WebTiledLayer"),dojo.require("esri.symbols.PictureMarkerSymbol"),dojo.require("esri.renderers.SimpleRenderer"),dojo.require("esri.graphic"),dojo.addOnLoad(fireup);var brs={config:{canvasBasemapURL:"http://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer",canvasReferenceURL:"http://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",blogPostsUrl:"https://public-api.wordpress.com/rest/v1/sites/blog.brightrain.com/posts/?number=8",clientData:"https://raw.githubusercontent.com/brightrain/brs-clients/master/brs-clients.geojson"},map:{},clients:{},symbolHQ:{},symbolClient:{},symbolHQHighlight:{},symbolHighlightClient:{},init:function(){try{return this.map=new esri.Map("map",{basemap:"gray",center:[-70,42],zoom:4,slider:!1,logo:!1}),dojo.connect(brs.map,"onLoad",function(){brs.map.spatialReference=new esri.SpatialReference({wkid:102100}),brs.initFunctionality()}),$(".brs-tabs a").click(function(a){a.preventDefault(),$(this).tab("show")}),$("#about-tab").click(function(){brs.ZoomToHQ()}),$("#preloader").hide(),!0}catch(a){return!1}},initFunctionality:function(){try{return brs.symbolHQ=new esri.symbol.PictureMarkerSymbol("images/brsSun.png",23,23),brs.symbolHQHighlight=new esri.symbol.PictureMarkerSymbol("images/brsSun.png",43,43),this.map.graphics.add(new esri.Graphic(new esri.geometry.Point(-105.075739,40.587838,new esri.SpatialReference({wkid:4326})),brs.symbolHQ,{Name:"Bright Rain"})),brs.symbolClient=new esri.symbol.PictureMarkerSymbol("images/brsSuns2.png",20,20),brs.graphicsLayerClients=new esri.layers.GraphicsLayer,brs.addClientGraphics(),brs.symbolHighlightClient=new esri.symbol.PictureMarkerSymbol("images/brsSuns1.png",40,40),dojo.connect(brs.map.graphics,"onMouseOver",brs.clientGraphicHover),dojo.connect(brs.map.graphics,"onMouseOut",brs.clientGraphicMouseOut),dojo.connect(brs.map.graphics,"onClick",brs.clientGraphicClick),!0}catch(a){return!1}},ZoomToHQ:function(){try{return this.map.setExtent(new esri.geometry.Extent({xmin:-105.08,ymin:40.5866,xmax:-105.063,ymax:40.5914,spatialReference:new esri.SpatialReference({wkid:4326})}),!0),!0}catch(a){return!1}},addClientGraphics:function(){$.getJSON(brs.config.clientData,function(a){brs.clients=a,$.each(brs.clients.features,function(a,b){var c=new esri.geometry.Point(b.geometry.coordinates[0],b.geometry.coordinates[1],new esri.SpatialReference({wkid:4326})),d=new esri.Graphic(c,brs.symbolClient,{Name:b.properties.Name});brs.map.graphics.add(d)})})},clientGraphicHover:function(a){"Bright Rain"==a.graphic.attributes.Name?a.graphic.setSymbol(brs.symbolHQHighlight):a.graphic.setSymbol(brs.symbolHighlightClient),brs.map.setMapCursor("pointer"),dojo.byId("client-info").innerHTML=a.graphic.attributes.Name},clientGraphicMouseOut:function(a){brs.map.setMapCursor("default"),"Bright Rain"==a.graphic.attributes.Name?a.graphic.setSymbol(brs.symbolHQ):a.graphic.setSymbol(brs.symbolClient),dojo.byId("client-info").innerHTML=""},clientGraphicClick:function(a){a.graphic},populateBlogPosts:function(){$.getJSON(brs.config.blogPostsUrl,function(a){$.each(a.posts,function(a,b){b.date,b.URL,b.title,b.title;$("#blogList").append(b)})})}};