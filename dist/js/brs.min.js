function fireup(){$(document).ready(brs.init())}dojo.require("esri.map"),dojo.require("esri.layers.WebTiledLayer"),dojo.require("esri.symbols.PictureMarkerSymbol"),dojo.require("esri.renderers.SimpleRenderer"),dojo.require("esri.graphic"),dojo.addOnLoad(fireup);var brs={config:{canvasBasemapURL:"http://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer",canvasReferenceURL:"http://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",blogPostsUrl:"https://public-api.wordpress.com/rest/v1/sites/blog.brightrain.com/posts/?number=8",clientData:"https://raw.githubusercontent.com/brightrain/brs-clients/master/brs-clients.geojson"},map:{},clients:{},graphicsLayerClients:{},graphicsLayerHighlightClients:{},symbolClient:{},symbolHighlightClient:{},init:function(){try{return this.map=new esri.Map("map",{basemap:"gray",center:[-70,42],zoom:4,slider:!1,logo:!1}),dojo.connect(brs.map,"onLoad",function(){brs.map.spatialReference=new esri.SpatialReference({wkid:102100}),brs.initFunctionality()}),$(".brs-tabs a").click(function(a){a.preventDefault(),$(this).tab("show")}),$("#about-tab").click(function(){brs.ZoomToHQ()}),$("#preloader").hide(),!0}catch(a){return!1}},initFunctionality:function(){try{var a=new esri.symbol.PictureMarkerSymbol("images/brsSun.png",23,23);this.map.graphics.add(new esri.Graphic(new esri.geometry.Point(-105.075739,40.587838,new esri.SpatialReference({wkid:4326})),a)),brs.symbolClient=new esri.symbol.PictureMarkerSymbol("images/brsSuns2.png",20,20),brs.graphicsLayerClients=new esri.layers.GraphicsLayer;var b=new esri.renderer.SimpleRenderer(brs.symbolClient);brs.graphicsLayerClients.setRenderer(b),brs.map.addLayer(brs.graphicsLayerClients),brs.addClientGraphics(),brs.symbolHighlightClient=new esri.symbol.PictureMarkerSymbol("images/brsSuns1.png",40,40),brs.graphicsLayerHighlightClients=new esri.layers.GraphicsLayer;var c=new esri.renderer.SimpleRenderer(brs.symbolHighlightClient);return brs.graphicsLayerHighlightClients.setRenderer(c),brs.map.addLayer(brs.graphicsLayerHighlightClients),dojo.connect(brs.graphicsLayerClients,"onMouseOver",brs.clientGraphicHover),dojo.connect(brs.graphicsLayerClients,"onMouseOut",brs.clientGraphicMouseOut),dojo.connect(brs.graphicsLayerClients,"onClick",brs.clientGraphicClick),!0}catch(d){return!1}},ZoomToHQ:function(){try{return this.map.setExtent(new esri.geometry.Extent({xmin:-105.08,ymin:40.5866,xmax:-105.063,ymax:40.5914,spatialReference:new esri.SpatialReference({wkid:4326})}),!0),!0}catch(a){return!1}},addClientGraphics:function(){$.getJSON(brs.config.clientData,function(a){brs.clients=a,$.each(brs.clients.features,function(a,b){var c=new esri.geometry.Point(b.geometry.coordinates[0],b.geometry.coordinates[1],brs.map.SpatialReference);brs.graphicsLayerClients.add(new esri.Graphic(c,null,{Name:b.properties.Name}))})})},clientGraphicHover:function(a){brs.graphicsLayerHighlightClients.add(a.graphic),brs.map.setMapCursor("pointer"),dojo.byId("client-info").innerHTML=a.graphic.attributes.Name},clientGraphicMouseOut:function(a){brs.map.setMapCursor("default"),brs.graphicsLayerHighlightClients.clear(),brs.graphicsLayerClients.add(a.graphic),dojo.byId("client-info").innerHTML=""},clientGraphicClick:function(a){a.graphic},populateBlogPosts:function(){$.getJSON(brs.config.blogPostsUrl,function(a){$.each(a.posts,function(a,b){"<li><div class='blog-date'>"+b.date+"</div><a href='"+b.URL+"' title='"+b.title+"'><div class='blog-entry-pane'>"+b.title+"</div></a></li>";$("#blogList").append(b)})})}};